"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[1451],{1944(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"agents/echo-agent","title":"\ud83d\udd0a echo-agent","description":"A simple test agent that echoes back messages for development and debugging.","source":"@site/docs/agents/echo-agent.md","sourceDirName":"agents","slug":"/agents/echo-agent","permalink":"/STELLA_backend/docs/agents/echo-agent","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/agents/echo-agent.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\ud83d\udd0a echo-agent"},"sidebar":"docsSidebar","previous":{"title":"\ud83d\udcab stella-light-agent","permalink":"/STELLA_backend/docs/agents/stella-light-agent"},"next":{"title":"Overview","permalink":"/STELLA_backend/docs/plan-structure/"}}');var t=i(4848),l=i(8453);const d={sidebar_position:4,title:"\ud83d\udd0a echo-agent"},o="\ud83d\udd0a echo-agent",r={},c=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Testing LiveKit Connection",id:"testing-livekit-connection",level:3},{value:"Verifying Audio Pipeline",id:"verifying-audio-pipeline",level:3},{value:"Debugging Data Channel",id:"debugging-data-channel",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Echo Modes",id:"echo-modes",level:2},{value:"Text Mode (Default)",id:"text-mode-default",level:3},{value:"Audio Mode",id:"audio-mode",level:3},{value:"Both Mode",id:"both-mode",level:3},{value:"Resource Requirements",id:"resource-requirements",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Via API",id:"via-api",level:3},{value:"Via Frontend",id:"via-frontend",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"No Echo Response",id:"no-echo-response",level:3},{value:"Delayed Echo",id:"delayed-echo",level:3},{value:"Garbled Audio",id:"garbled-audio",level:3},{value:"Development Use",id:"development-use",level:2},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-echo-agent",children:"\ud83d\udd0a echo-agent"})}),"\n",(0,t.jsx)(n.p,{children:"A simple test agent that echoes back messages for development and debugging."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"echo-agent"})," is a minimal agent implementation used for:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Testing LiveKit connectivity"}),"\n",(0,t.jsx)(n.li,{children:"Verifying audio pipeline works"}),"\n",(0,t.jsx)(n.li,{children:"Development and debugging"}),"\n",(0,t.jsx)(n.li,{children:"Integration testing"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.p,{children:"The echo agent:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Receives audio from the LiveKit room"}),"\n",(0,t.jsx)(n.li,{children:"Transcribes the audio using STT"}),"\n",(0,t.jsx)(n.li,{children:"Echoes the transcription back as text"}),"\n",(0,t.jsx)(n.li,{children:"(Optionally) Synthesizes the text as audio"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Audio In \u2192 STT \u2192 Echo Text \u2192 (Optional TTS) \u2192 Audio Out\n"})}),"\n",(0,t.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsx)(n.h3,{id:"testing-livekit-connection",children:"Testing LiveKit Connection"}),"\n",(0,t.jsx)(n.p,{children:"Verify that your LiveKit server is properly configured:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Deploy echo agent\ncurl -X POST http://localhost:3000/sessions/{sessionId}/agents \\\n  -H "Content-Type: application/json" \\\n  -d \'{"role": "echo-agent"}\'\n\n# Speak into microphone\n# Agent should repeat what you said\n'})}),"\n",(0,t.jsx)(n.h3,{id:"verifying-audio-pipeline",children:"Verifying Audio Pipeline"}),"\n",(0,t.jsx)(n.p,{children:"Check that audio is being captured and transmitted:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Deploy echo-agent"}),"\n",(0,t.jsx)(n.li,{children:"Speak clearly"}),"\n",(0,t.jsx)(n.li,{children:"Verify you hear your words echoed back"}),"\n",(0,t.jsx)(n.li,{children:"Check transcription appears in the UI"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"debugging-data-channel",children:"Debugging Data Channel"}),"\n",(0,t.jsx)(n.p,{children:"Test data channel messaging:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Send a test message\nconst data = {\n  type: 'user_text',\n  data: 'Hello Echo!'\n};\nroom.localParticipant.publishData(\n  new TextEncoder().encode(JSON.stringify(data)),\n  { reliable: true }\n);\n\n// Echo agent will respond with the same message\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Minimal configuration required:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LIVEKIT_URL"})}),(0,t.jsx)(n.td,{children:"LiveKit server URL"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LIVEKIT_API_KEY"})}),(0,t.jsx)(n.td,{children:"LiveKit API key"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LIVEKIT_API_SECRET"})}),(0,t.jsx)(n.td,{children:"LiveKit API secret"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STT_PROVIDER"})}),(0,t.jsx)(n.td,{children:"Speech-to-text provider"}),(0,t.jsx)(n.td,{children:"Optional"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ECHO_MODE"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"text"}),", ",(0,t.jsx)(n.code,{children:"audio"}),", or ",(0,t.jsx)(n.code,{children:"both"})]}),(0,t.jsxs)(n.td,{children:["Optional (",(0,t.jsx)(n.code,{children:"text"}),")"]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"echo-modes",children:"Echo Modes"}),"\n",(0,t.jsx)(n.h3,{id:"text-mode-default",children:"Text Mode (Default)"}),"\n",(0,t.jsx)(n.p,{children:"Returns transcribed text via data channel only:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Received message\n{\n  type: 'echo_response',\n  data: {\n    original: 'Hello world',\n    echoed: 'Echo: Hello world',\n    timestamp: '2024-01-15T10:30:00Z'\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"audio-mode",children:"Audio Mode"}),"\n",(0,t.jsx)(n.p,{children:"Echoes audio back without processing:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Receives audio stream"}),"\n",(0,t.jsx)(n.li,{children:"Transmits back as-is"}),"\n",(0,t.jsx)(n.li,{children:"Useful for latency testing"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"both-mode",children:"Both Mode"}),"\n",(0,t.jsx)(n.p,{children:"Transcribes, echoes text, and synthesizes audio response:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Full pipeline test"}),"\n",(0,t.jsx)(n.li,{children:"Most comprehensive verification"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"resource-requirements",children:"Resource Requirements"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Resource"}),(0,t.jsx)(n.th,{children:"Request"}),(0,t.jsx)(n.th,{children:"Limit"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CPU"}),(0,t.jsx)(n.td,{children:"50m"}),(0,t.jsx)(n.td,{children:"200m"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memory"}),(0,t.jsx)(n.td,{children:"128Mi"}),(0,t.jsx)(n.td,{children:"512Mi"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,t.jsx)(n.h3,{id:"via-api",children:"Via API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:3000/sessions/{sessionId}/agents \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "role": "echo-agent",\n    "config": {\n      "echoMode": "both"\n    }\n  }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"via-frontend",children:"Via Frontend"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create or open a session"}),"\n",(0,t.jsx)(n.li,{children:'Click "Deploy Agent"'}),"\n",(0,t.jsx)(n.li,{children:'Select "echo-agent" from the dropdown'}),"\n",(0,t.jsx)(n.li,{children:"Deploy"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"no-echo-response",children:"No Echo Response"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check LiveKit connection:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl logs <echo-agent-pod> -n ai-agents\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify room exists:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:7880/rooms\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check audio track is published:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Open browser DevTools"}),"\n",(0,t.jsx)(n.li,{children:"Check Network tab for WebRTC connections"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"delayed-echo",children:"Delayed Echo"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Check STT service latency"}),"\n",(0,t.jsx)(n.li,{children:"Verify network connectivity"}),"\n",(0,t.jsxs)(n.li,{children:["Check pod resource usage:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl top pod <echo-agent-pod> -n ai-agents\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"garbled-audio",children:"Garbled Audio"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Check sample rate settings"}),"\n",(0,t.jsx)(n.li,{children:"Verify audio codec compatibility"}),"\n",(0,t.jsx)(n.li,{children:"Test with text-only mode first"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"development-use",children:"Development Use"}),"\n",(0,t.jsx)(n.p,{children:"Echo agent is useful during development for:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Quick connection test\nasync def test_connection():\n    agent = EchoAgent()\n    await agent.connect(room_name="test-room")\n    # If you hear echo, connection works\n    await agent.disconnect()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/agents/overview",children:"Agents Overview"})," - All agent types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/integration/livekit",children:"LiveKit Integration"})," - LiveKit setup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/getting-started/first-agent",children:"First Agent"})," - Deployment guide"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>d,x:()=>o});var s=i(6540);const t={},l=s.createContext(t);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);