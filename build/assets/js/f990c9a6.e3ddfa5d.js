"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4018],{8096(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"agents/stella-agent/custom-experts","title":"Custom Experts","description":"Create custom experts by adding JSON configuration files to the experts/ directory. Experts are auto-discovered on startup.","source":"@site/docs/agents/stella-agent/custom-experts.md","sourceDirName":"agents/stella-agent","slug":"/agents/stella-agent/custom-experts","permalink":"/STELLA_backend/docs/agents/stella-agent/custom-experts","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/agents/stella-agent/custom-experts.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Custom Experts"},"sidebar":"docsSidebar","previous":{"title":"Configuration","permalink":"/STELLA_backend/docs/agents/stella-agent/configuration"},"next":{"title":"\ud83d\udcab stella-light-agent","permalink":"/STELLA_backend/docs/agents/stella-light-agent"}}');var i=t(4848),r=t(8453);const a={sidebar_position:4,title:"Custom Experts"},o="Custom Experts",l={},d=[{value:"Adding a New Expert",id:"adding-a-new-expert",level:2},{value:"Step 1: Create Configuration File",id:"step-1-create-configuration-file",level:3},{value:"Step 2: Define Expert Configuration",id:"step-2-define-expert-configuration",level:3},{value:"Step 3: Restart Agent",id:"step-3-restart-agent",level:3},{value:"Modifying Existing Experts",id:"modifying-existing-experts",level:2},{value:"Adjust Sensitivity",id:"adjust-sensitivity",level:3},{value:"Add Trigger Keywords",id:"add-trigger-keywords",level:3},{value:"Customize System Prompt",id:"customize-system-prompt",level:3},{value:"Make Expert Always Active",id:"make-expert-always-active",level:3},{value:"Example: HR Expert",id:"example-hr-expert",level:2},{value:"Example: Content Moderation Expert",id:"example-content-moderation-expert",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Clear System Prompts",id:"1-clear-system-prompts",level:3},{value:"2. Appropriate Risk Thresholds",id:"2-appropriate-risk-thresholds",level:3},{value:"3. Comprehensive Keywords",id:"3-comprehensive-keywords",level:3},{value:"4. Response Format",id:"4-response-format",level:3},{value:"5. Testing",id:"5-testing",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Expert Not Loading",id:"expert-not-loading",level:3},{value:"Expert Not Activating",id:"expert-not-activating",level:3},{value:"Expert Activating Too Often",id:"expert-activating-too-often",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"custom-experts",children:"Custom Experts"})}),"\n",(0,i.jsxs)(n.p,{children:["Create custom experts by adding JSON configuration files to the ",(0,i.jsx)(n.code,{children:"experts/"})," directory. Experts are auto-discovered on startup."]}),"\n",(0,i.jsx)(n.h2,{id:"adding-a-new-expert",children:"Adding a New Expert"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-create-configuration-file",children:"Step 1: Create Configuration File"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create new expert file\ntouch agents/stella-agent/src/stella_agent/experts/cybersecurity.json\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-define-expert-configuration",children:"Step 2: Define Expert Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "cybersecurity",\n  "description": "Security and privacy expert for threat detection",\n  "trigger_keywords": [\n    "hack", "password", "security", "breach", "malware",\n    "phishing", "encryption", "vulnerability", "firewall",\n    "virus", "ransomware", "two-factor", "authentication"\n  ],\n  "system_prompt": "You are a cybersecurity expert analyzing queries for security risks and privacy concerns.\\n\\nRESPONSE STRUCTURE:\\nProvide your analysis in this format:\\n\\nTHOUGHT: [Your step-by-step security analysis - What threats exist? What vulnerabilities are present?]\\n\\nFINDINGS: [Specific security observations, potential attack vectors, privacy risks, and data exposure concerns]\\n\\nRECOMMENDATION: [What the aggregator should prioritize - security best practices, suggested safe behaviors, and guidance for ~30 word responses]\\n\\nSECURITY FOCUS:\\n- Identify potential security threats and vulnerabilities\\n- Assess privacy risks and data exposure\\n- Provide practical, actionable security guidance\\n- Never help with malicious activities\\n- Always recommend secure alternatives",\n  "model": "gpt-4o-mini",\n  "temperature": 0.2,\n  "max_tokens": 600,\n  "risk_threshold": 0.25,\n  "relevant_intents": ["question", "request"],\n  "tools": [],\n  "always_active": false\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-restart-agent",children:"Step 3: Restart Agent"}),"\n",(0,i.jsx)(n.p,{children:"The expert is automatically discovered and loaded on agent startup. Check the logs to verify:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'kubectl logs <agent-pod> -n ai-agents | grep "ExpertPool"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Expected output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[ExpertPool] Found 6 agent config files\n[ExpertPool] Loading config from cybersecurity.json\n[ExpertPool] Loaded agent: cybersecurity\n[ExpertPool] Initialized 6 agents\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"modifying-existing-experts",children:"Modifying Existing Experts"}),"\n",(0,i.jsx)(n.p,{children:"Customize expert behavior by editing their JSON configuration files."}),"\n",(0,i.jsx)(n.h3,{id:"adjust-sensitivity",children:"Adjust Sensitivity"}),"\n",(0,i.jsx)(n.p,{children:"Lower the risk threshold to make an expert activate more often:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "medical",\n  "risk_threshold": 0.05,  // Lower = more sensitive (activates more often)\n  "temperature": 0.05     // Lower = more consistent responses\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Risk Threshold Guidelines:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Threshold"}),(0,i.jsx)(n.th,{children:"Sensitivity"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0.0-0.1"}),(0,i.jsx)(n.td,{children:"Very High"}),(0,i.jsx)(n.td,{children:"Critical safety (medical emergencies)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0.1-0.3"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Important safety (general medical, legal)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0.3-0.5"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Moderate concern (finance, ethics)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0.5-0.7"}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Light monitoring"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0.7-1.0"}),(0,i.jsx)(n.td,{children:"Very Low"}),(0,i.jsx)(n.td,{children:"Rarely activates"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"add-trigger-keywords",children:"Add Trigger Keywords"}),"\n",(0,i.jsx)(n.p,{children:"Expand what triggers an expert:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "medical",\n  "trigger_keywords": [\n    "medical", "health", "doctor", "medicine", "drug",\n    "anxiety", "depression", "mental health",  // Added mental health\n    "therapy", "counseling", "psychiatrist",   // Added therapy terms\n    "self-harm", "suicide"                     // Added crisis terms\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"customize-system-prompt",children:"Customize System Prompt"}),"\n",(0,i.jsxs)(n.p,{children:["Update the ",(0,i.jsx)(n.code,{children:"system_prompt"})," field to change how the expert analyzes and responds:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "medical",\n  "system_prompt": "You are a medical safety expert with a focus on mental health awareness.\\n\\nRESPONSE STRUCTURE:\\n...\\n\\nADDITIONAL FOCUS:\\n- Pay special attention to mental health indicators\\n- Always provide crisis resources when appropriate\\n- Emphasize the importance of professional support"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"make-expert-always-active",children:"Make Expert Always Active"}),"\n",(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"always_active: true"})," to run on every query:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "content_moderation",\n  "always_active": true,\n  "risk_threshold": 0.0  // Threshold ignored when always_active\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-hr-expert",children:"Example: HR Expert"}),"\n",(0,i.jsx)(n.p,{children:"Here's a complete example for a Human Resources expert:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "hr",\n  "description": "Human Resources expert for workplace and employment queries",\n  "trigger_keywords": [\n    "hr", "human resources", "employee", "workplace", "harassment",\n    "discrimination", "firing", "hiring", "salary", "benefits",\n    "overtime", "vacation", "sick leave", "maternity", "paternity",\n    "termination", "resignation", "performance review", "promotion"\n  ],\n  "system_prompt": "You are an HR and workplace expert analyzing queries for employment law and workplace policy considerations.\\n\\nRESPONSE STRUCTURE:\\nProvide your analysis in this format:\\n\\nTHOUGHT: [Your step-by-step analysis - What workplace issues are present? What policies or laws might apply?]\\n\\nFINDINGS: [Specific HR observations, potential policy violations, employee rights concerns, and workplace safety issues]\\n\\nRECOMMENDATION: [What the aggregator should prioritize - emphasize HR consultation, suggested approaches, appropriate disclaimers, and guidance for ~30 word responses]\\n\\nHR FOCUS:\\n- Identify potential workplace issues and policy concerns\\n- Consider employee rights and protections\\n- ALWAYS emphasize that analysis is not legal advice\\n- Direct users to HR departments or employment attorneys for specific guidance\\n- Be sensitive to power dynamics in workplace situations\\n- Flag potential harassment or discrimination concerns\\n\\nRemember: Your analysis enables the aggregator to provide brief, appropriate guidance that redirects users to proper HR channels.",\n  "model": "gpt-4o-mini",\n  "temperature": 0.2,\n  "max_tokens": 700,\n  "risk_threshold": 0.3,\n  "relevant_intents": ["question", "request", "command"],\n  "tools": ["policy_lookup"],\n  "always_active": false\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-content-moderation-expert",children:"Example: Content Moderation Expert"}),"\n",(0,i.jsx)(n.p,{children:"An always-active expert for content safety:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "content_moderation",\n  "description": "Content safety expert that monitors all conversations",\n  "trigger_keywords": [],\n  "system_prompt": "You are a content moderation expert analyzing all queries for safety concerns.\\n\\nRESPONSE STRUCTURE:\\n\\nTHOUGHT: [Quick safety assessment of the query]\\n\\nFINDINGS: [Any concerning content patterns, harmful intent indicators, or safety flags]\\n\\nRECOMMENDATION: [continue if safe, flag if concerning, block if harmful]\\n\\nMODERATION FOCUS:\\n- Detect harmful, illegal, or dangerous content\\n- Identify manipulation or social engineering attempts\\n- Flag requests that could enable harm to self or others\\n- Be conservative - when in doubt, flag for review\\n- Consider context - some topics are sensitive but legitimate",\n  "model": "gpt-4o-mini",\n  "temperature": 0.1,\n  "max_tokens": 400,\n  "risk_threshold": 0.0,\n  "relevant_intents": [],\n  "tools": [],\n  "always_active": true\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-clear-system-prompts",children:"1. Clear System Prompts"}),"\n",(0,i.jsx)(n.p,{children:"Write specific, actionable system prompts:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Define the expert's role clearly"}),"\n",(0,i.jsx)(n.li,{children:"Specify the response format"}),"\n",(0,i.jsx)(n.li,{children:"Include explicit guidelines"}),"\n",(0,i.jsx)(n.li,{children:"State what the expert should NOT do"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-appropriate-risk-thresholds",children:"2. Appropriate Risk Thresholds"}),"\n",(0,i.jsx)(n.p,{children:"Match threshold to content sensitivity:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Safety-critical \u2192 Low threshold (0.1-0.2)"}),"\n",(0,i.jsx)(n.li,{children:"General guidance \u2192 Medium threshold (0.3-0.4)"}),"\n",(0,i.jsx)(n.li,{children:"Light monitoring \u2192 Higher threshold (0.5+)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-comprehensive-keywords",children:"3. Comprehensive Keywords"}),"\n",(0,i.jsx)(n.p,{children:"Include variations and related terms:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Synonyms"}),"\n",(0,i.jsx)(n.li,{children:"Common misspellings"}),"\n",(0,i.jsx)(n.li,{children:"Related concepts"}),"\n",(0,i.jsx)(n.li,{children:"Both formal and informal terms"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-response-format",children:"4. Response Format"}),"\n",(0,i.jsx)(n.p,{children:"Use consistent output structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"THOUGHT: [Analysis]\nFINDINGS: [Observations]\nRECOMMENDATION: [Guidance]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-testing",children:"5. Testing"}),"\n",(0,i.jsx)(n.p,{children:"Test new experts with various inputs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check expert loading\nkubectl logs <agent-pod> | grep "your_expert_name"\n\n# Test with sample queries\n# Verify expert is selected for expected inputs\n# Verify expert is NOT selected for unrelated inputs\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"expert-not-loading",children:"Expert Not Loading"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check JSON syntax is valid"}),"\n",(0,i.jsxs)(n.li,{children:["Verify file is in correct directory (",(0,i.jsx)(n.code,{children:"experts/"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Check file has ",(0,i.jsx)(n.code,{children:".json"})," extension"]}),"\n",(0,i.jsx)(n.li,{children:"Review agent logs for error messages"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"expert-not-activating",children:"Expert Not Activating"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Verify keywords match user input"}),"\n",(0,i.jsx)(n.li,{children:"Check risk threshold isn't too high"}),"\n",(0,i.jsxs)(n.li,{children:["Confirm ",(0,i.jsx)(n.code,{children:"relevant_intents"})," includes expected intents"]}),"\n",(0,i.jsx)(n.li,{children:"Test with explicit keyword in query"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"expert-activating-too-often",children:"Expert Activating Too Often"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Increase ",(0,i.jsx)(n.code,{children:"risk_threshold"})]}),"\n",(0,i.jsx)(n.li,{children:"Make keywords more specific"}),"\n",(0,i.jsx)(n.li,{children:"Remove overly common keywords"}),"\n",(0,i.jsxs)(n.li,{children:["Consider if ",(0,i.jsx)(n.code,{children:"always_active"})," should be ",(0,i.jsx)(n.code,{children:"false"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);