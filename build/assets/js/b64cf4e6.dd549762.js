"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[9071],{8453(e,n,t){t.d(n,{R:()=>a,x:()=>i});var s=t(6540);const o={},r=s.createContext(o);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},9010(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"agent-sdk/tools","title":"\ud83d\udd27 Tools","description":"Tools allow agents to execute custom functions during conversations, enabling them to search databases, call APIs, and perform actions beyond simple text generation.","source":"@site/docs/agent-sdk/tools.md","sourceDirName":"agent-sdk","slug":"/agent-sdk/tools","permalink":"/STELLA_backend/docs/agent-sdk/tools","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/agent-sdk/tools.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"\ud83d\udd27 Tools"}}');var o=t(4848),r=t(8453);const a={sidebar_position:7,title:"\ud83d\udd27 Tools"},i="\ud83d\udd27 Tools",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Defining Tools",id:"defining-tools",level:2},{value:"Using the @tool Decorator",id:"using-the-tool-decorator",level:3},{value:"Using the Tool Class",id:"using-the-tool-class",level:3},{value:"Registering Tools",id:"registering-tools",level:2},{value:"In Agent Constructor",id:"in-agent-constructor",level:3},{value:"Using Tool List",id:"using-tool-list",level:3},{value:"Tool Parameters",id:"tool-parameters",level:2},{value:"Tool Execution Flow",id:"tool-execution-flow",level:2},{value:"Common Tool Patterns",id:"common-tool-patterns",level:2},{value:"Database Search",id:"database-search",level:3},{value:"API Integration",id:"api-integration",level:3},{value:"Creating Records",id:"creating-records",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Tool Validation",id:"tool-validation",level:2},{value:"Frontend Display",id:"frontend-display",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"-tools",children:"\ud83d\udd27 Tools"})}),"\n",(0,o.jsx)(n.p,{children:"Tools allow agents to execute custom functions during conversations, enabling them to search databases, call APIs, and perform actions beyond simple text generation."}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"Tools are functions that the LLM can call during a conversation. The STELLA Agent SDK integrates with OpenAI's function calling to enable this."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'User: "What\'s the weather in San Francisco?"\n       \u2193\nLLM decides to call weather tool\n       \u2193\nTool executes: get_weather("San Francisco")\n       \u2193\nResult: {"temp": 65, "conditions": "sunny"}\n       \u2193\nLLM generates: "The weather in San Francisco is 65\xb0F and sunny."\n'})}),"\n",(0,o.jsx)(n.h2,{id:"defining-tools",children:"Defining Tools"}),"\n",(0,o.jsx)(n.h3,{id:"using-the-tool-decorator",children:"Using the @tool Decorator"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from stella_sdk import tool\n\n@tool\nasync def search_knowledge_base(query: str) -> str:\n    """Search the knowledge base for relevant information.\n\n    Args:\n        query: The search query\n\n    Returns:\n        Relevant information from the knowledge base\n    """\n    results = await kb.search(query)\n    return format_results(results)\n'})}),"\n",(0,o.jsx)(n.h3,{id:"using-the-tool-class",children:"Using the Tool Class"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from stella_sdk import Tool\n\nclass SearchKnowledgeBase(Tool):\n    name = "search_knowledge_base"\n    description = "Search the knowledge base for relevant information"\n\n    parameters = {\n        "type": "object",\n        "properties": {\n            "query": {\n                "type": "string",\n                "description": "The search query"\n            }\n        },\n        "required": ["query"]\n    }\n\n    async def execute(self, query: str) -> str:\n        results = await kb.search(query)\n        return format_results(results)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"registering-tools",children:"Registering Tools"}),"\n",(0,o.jsx)(n.h3,{id:"in-agent-constructor",children:"In Agent Constructor"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from stella_sdk import BaseAgent\n\nclass MyAgent(BaseAgent):\n    def __init__(self):\n        super().__init__()\n\n        # Register tools\n        self.register_tool(search_knowledge_base)\n        self.register_tool(SearchKnowledgeBase())\n        self.register_tool(get_weather)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"using-tool-list",children:"Using Tool List"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"class MyAgent(BaseAgent):\n    tools = [\n        search_knowledge_base,\n        get_weather,\n        create_ticket\n    ]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"tool-parameters",children:"Tool Parameters"}),"\n",(0,o.jsx)(n.p,{children:"Define parameters using JSON Schema:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def create_ticket(\n    title: str,\n    description: str,\n    priority: str = "medium"\n) -> dict:\n    """Create a support ticket.\n\n    Args:\n        title: Ticket title\n        description: Detailed description of the issue\n        priority: Priority level (low, medium, high)\n\n    Returns:\n        The created ticket details\n    """\n    ticket = await tickets.create(\n        title=title,\n        description=description,\n        priority=priority\n    )\n    return {"ticket_id": ticket.id, "status": "created"}\n'})}),"\n",(0,o.jsx)(n.p,{children:"The SDK automatically generates the JSON Schema:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "name": "create_ticket",\n  "description": "Create a support ticket.",\n  "parameters": {\n    "type": "object",\n    "properties": {\n      "title": {\n        "type": "string",\n        "description": "Ticket title"\n      },\n      "description": {\n        "type": "string",\n        "description": "Detailed description of the issue"\n      },\n      "priority": {\n        "type": "string",\n        "description": "Priority level (low, medium, high)",\n        "default": "medium"\n      }\n    },\n    "required": ["title", "description"]\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"tool-execution-flow",children:"Tool Execution Flow"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'class MyAgent(BaseAgent):\n    async def generate_response(self, user_input: str) -> str:\n        messages = [\n            {"role": "system", "content": self.system_prompt},\n            *self.history,\n            {"role": "user", "content": user_input}\n        ]\n\n        # First call - may include tool calls\n        response = await openai.chat.completions.create(\n            model="gpt-4o",\n            messages=messages,\n            tools=self.get_tool_definitions()\n        )\n\n        # Handle tool calls\n        while response.choices[0].message.tool_calls:\n            tool_calls = response.choices[0].message.tool_calls\n\n            # Add assistant message with tool calls\n            messages.append(response.choices[0].message)\n\n            # Execute each tool call\n            for tool_call in tool_calls:\n                # Notify frontend\n                await self.send_tool_call(\n                    tool_call.function.name,\n                    tool_call.function.arguments\n                )\n\n                # Execute tool\n                result = await self.execute_tool(\n                    tool_call.function.name,\n                    json.loads(tool_call.function.arguments)\n                )\n\n                # Notify frontend of result\n                await self.send_tool_result(tool_call.id, result)\n\n                # Add result to messages\n                messages.append({\n                    "role": "tool",\n                    "tool_call_id": tool_call.id,\n                    "content": json.dumps(result)\n                })\n\n            # Get next response\n            response = await openai.chat.completions.create(\n                model="gpt-4o",\n                messages=messages,\n                tools=self.get_tool_definitions()\n            )\n\n        return response.choices[0].message.content\n'})}),"\n",(0,o.jsx)(n.h2,{id:"common-tool-patterns",children:"Common Tool Patterns"}),"\n",(0,o.jsx)(n.h3,{id:"database-search",children:"Database Search"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def search_products(\n    query: str,\n    category: str = None,\n    max_results: int = 5\n) -> list:\n    """Search for products in the catalog."""\n    filters = {}\n    if category:\n        filters["category"] = category\n\n    results = await db.products.search(\n        query=query,\n        filters=filters,\n        limit=max_results\n    )\n\n    return [\n        {"name": p.name, "price": p.price, "id": p.id}\n        for p in results\n    ]\n'})}),"\n",(0,o.jsx)(n.h3,{id:"api-integration",children:"API Integration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def check_order_status(order_id: str) -> dict:\n    """Check the status of an order."""\n    async with aiohttp.ClientSession() as session:\n        async with session.get(f"{API_URL}/orders/{order_id}") as resp:\n            if resp.status == 404:\n                return {"error": "Order not found"}\n            return await resp.json()\n'})}),"\n",(0,o.jsx)(n.h3,{id:"creating-records",children:"Creating Records"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def schedule_appointment(\n    date: str,\n    time: str,\n    service: str,\n    customer_name: str\n) -> dict:\n    """Schedule an appointment."""\n    appointment = await appointments.create(\n        date=date,\n        time=time,\n        service=service,\n        customer_name=customer_name\n    )\n\n    return {\n        "confirmation_number": appointment.id,\n        "date": date,\n        "time": time,\n        "message": f"Appointment scheduled for {date} at {time}"\n    }\n'})}),"\n",(0,o.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def get_account_balance(account_id: str) -> dict:\n    """Get the balance of an account."""\n    try:\n        account = await accounts.get(account_id)\n        if not account:\n            return {"error": "Account not found"}\n\n        return {\n            "balance": account.balance,\n            "currency": account.currency\n        }\n    except AuthorizationError:\n        return {"error": "Not authorized to access this account"}\n    except Exception as e:\n        return {"error": f"Failed to retrieve balance: {str(e)}"}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"tool-validation",children:"Tool Validation"}),"\n",(0,o.jsx)(n.p,{children:"Add validation to tool parameters:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from stella_sdk import tool, ValidationError\n\n@tool\nasync def transfer_funds(\n    from_account: str,\n    to_account: str,\n    amount: float\n) -> dict:\n    """Transfer funds between accounts."""\n    # Validate amount\n    if amount <= 0:\n        raise ValidationError("Amount must be positive")\n    if amount > 10000:\n        raise ValidationError("Amount exceeds transfer limit")\n\n    # Validate accounts exist\n    from_acc = await accounts.get(from_account)\n    to_acc = await accounts.get(to_account)\n\n    if not from_acc or not to_acc:\n        raise ValidationError("Invalid account")\n\n    # Perform transfer\n    result = await transfers.create(\n        from_account=from_account,\n        to_account=to_account,\n        amount=amount\n    )\n\n    return {"transfer_id": result.id, "status": "completed"}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"frontend-display",children:"Frontend Display"}),"\n",(0,o.jsx)(n.p,{children:"Tools can send updates to the frontend:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@tool\nasync def search_flights(\n    origin: str,\n    destination: str,\n    date: str\n) -> list:\n    """Search for available flights."""\n    # This will appear in the UI\n    await agent.send_status("thinking", f"Searching flights from {origin} to {destination}...")\n\n    flights = await flight_api.search(origin, destination, date)\n\n    return [\n        {\n            "flight_number": f.number,\n            "departure": f.departure_time,\n            "arrival": f.arrival_time,\n            "price": f.price\n        }\n        for f in flights\n    ]\n'})}),"\n",(0,o.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/agent-sdk/base-agent",children:"Base Agent"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/agent-sdk/message-types",children:"Message Types"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/agent-sdk/building-custom-agent",children:"Building Custom Agents"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);