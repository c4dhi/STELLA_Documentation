"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4013],{1389(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"agent-sdk/message-types","title":"\ud83d\udcac Message Types","description":"STELLA agents communicate via LiveKit\'s data channel using structured JSON messages. This page documents all message types.","source":"@site/docs/agent-sdk/message-types.md","sourceDirName":"agent-sdk","slug":"/agent-sdk/message-types","permalink":"/STELLA_backend/docs/agent-sdk/message-types","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/agent-sdk/message-types.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\ud83d\udcac Message Types"}}');var a=n(4848),i=n(8453);const r={sidebar_position:4,title:"\ud83d\udcac Message Types"},l="\ud83d\udcac Message Types",d={},o=[{value:"Message Format",id:"message-format",level:2},{value:"Outgoing Messages (Agent \u2192 Frontend)",id:"outgoing-messages-agent--frontend",level:2},{value:"transcript_chunk",id:"transcript_chunk",level:3},{value:"agent_status",id:"agent_status",level:3},{value:"todo_list",id:"todo_list",level:3},{value:"tool_call",id:"tool_call",level:3},{value:"tool_result",id:"tool_result",level:3},{value:"progress_update",id:"progress_update",level:3},{value:"Incoming Messages (Frontend \u2192 Agent)",id:"incoming-messages-frontend--agent",level:2},{value:"user_text",id:"user_text",level:3},{value:"control",id:"control",level:3},{value:"config_update",id:"config_update",level:3},{value:"Message Classes (Python SDK)",id:"message-classes-python-sdk",level:2},{value:"Sending Messages",id:"sending-messages",level:2},{value:"Receiving Messages",id:"receiving-messages",level:2},{value:"Custom Message Types",id:"custom-message-types",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"-message-types",children:"\ud83d\udcac Message Types"})}),"\n",(0,a.jsx)(s.p,{children:"STELLA agents communicate via LiveKit's data channel using structured JSON messages. This page documents all message types."}),"\n",(0,a.jsx)(s.h2,{id:"message-format",children:"Message Format"}),"\n",(0,a.jsx)(s.p,{children:"All messages follow this structure:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: string,      // Message type identifier\n  data: any,         // Message payload\n  timestamp?: string // ISO 8601 timestamp\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"outgoing-messages-agent--frontend",children:"Outgoing Messages (Agent \u2192 Frontend)"}),"\n",(0,a.jsx)(s.h3,{id:"transcript_chunk",children:"transcript_chunk"}),"\n",(0,a.jsx)(s.p,{children:"Sent when the agent generates text (response or transcription):"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'transcript_chunk',\n  data: {\n    text: string,           // The transcript text\n    is_final: boolean,      // Whether this is a final or interim result\n    confidence?: number,    // Confidence score (0-1)\n    timestamp: string,      // When this was generated\n    participant_id: string, // Speaker identity\n    chunk_id: string,       // Unique ID for this chunk\n    transcript_id: string   // ID grouping related chunks\n  }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Python SDK:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'await agent.send_transcript(\n    text="Hello, how can I help?",\n    speaker="assistant",\n    is_final=True\n)\n'})}),"\n",(0,a.jsx)(s.h3,{id:"agent_status",children:"agent_status"}),"\n",(0,a.jsx)(s.p,{children:"Sent when agent status changes:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'agent_status',\n  data: {\n    status: 'listening' | 'thinking' | 'speaking' | 'ready' | 'error',\n    message?: string  // Optional status message\n  }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Python SDK:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'await agent.send_status("thinking")\nawait agent.send_status("error", "Failed to connect to OpenAI")\n'})}),"\n",(0,a.jsx)(s.h3,{id:"todo_list",children:"todo_list"}),"\n",(0,a.jsx)(s.p,{children:"Sent when the agent's task list updates:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'todo_list',\n  data: {\n    items: Array<{\n      id: string,\n      description: string,\n      status: 'pending' | 'in_progress' | 'completed',\n      required: boolean\n    }>,\n    timestamp: string\n  }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Python SDK:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from stella_sdk import TodoItem\n\nawait agent.update_todo([\n    TodoItem(\n        id="1",\n        description="Gather user information",\n        status="completed"\n    ),\n    TodoItem(\n        id="2",\n        description="Process request",\n        status="in_progress"\n    )\n])\n'})}),"\n",(0,a.jsx)(s.h3,{id:"tool_call",children:"tool_call"}),"\n",(0,a.jsx)(s.p,{children:"Sent when the agent calls a tool:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'tool_call',\n  data: {\n    tool_name: string,\n    arguments: Record<string, any>,\n    call_id: string\n  }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"tool_result",children:"tool_result"}),"\n",(0,a.jsx)(s.p,{children:"Sent when a tool returns a result:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'tool_result',\n  data: {\n    call_id: string,\n    result: any,\n    error?: string\n  }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"progress_update",children:"progress_update"}),"\n",(0,a.jsx)(s.p,{children:"Sent to indicate progress on a task:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'progress_update',\n  data: {\n    task_id: string,\n    progress: number,  // 0-100\n    message?: string\n  }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Python SDK:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'await agent.send_progress("task-1", progress=50, message="Halfway done")\n'})}),"\n",(0,a.jsx)(s.h2,{id:"incoming-messages-frontend--agent",children:"Incoming Messages (Frontend \u2192 Agent)"}),"\n",(0,a.jsx)(s.h3,{id:"user_text",children:"user_text"}),"\n",(0,a.jsx)(s.p,{children:"Text input from the user:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'user_text',\n  data: string  // The user's text message\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Python SDK:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'async def on_data_message(self, message: dict):\n    if message.get("type") == "user_text":\n        text = message["data"]\n        # Handle text input\n'})}),"\n",(0,a.jsx)(s.h3,{id:"control",children:"control"}),"\n",(0,a.jsx)(s.p,{children:"Control commands for the agent:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'control',\n  data: {\n    action: 'pause' | 'resume' | 'stop' | 'interrupt',\n    params?: Record<string, any>\n  }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Actions:"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"pause"}),": Temporarily stop responding"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"resume"}),": Resume responding"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"stop"}),": Stop the agent"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"interrupt"}),": Stop current response and listen"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"config_update",children:"config_update"}),"\n",(0,a.jsx)(s.p,{children:"Dynamic configuration update:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"{\n  type: 'config_update',\n  data: {\n    setting: string,\n    value: any\n  }\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"message-classes-python-sdk",children:"Message Classes (Python SDK)"}),"\n",(0,a.jsx)(s.p,{children:"The SDK provides typed message classes:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from stella_sdk.messages import (\n    TranscriptMessage,\n    StatusMessage,\n    TodoListMessage,\n    ToolCallMessage,\n    ProgressMessage\n)\n\n# Transcript\nmsg = TranscriptMessage(\n    text="Hello!",\n    is_final=True,\n    participant_id="agent-1"\n)\n\n# Status\nmsg = StatusMessage(\n    status="thinking",\n    message="Processing your request"\n)\n\n# Todo list\nmsg = TodoListMessage(\n    items=[\n        TodoItem(id="1", description="Task 1", status="completed"),\n        TodoItem(id="2", description="Task 2", status="pending")\n    ]\n)\n'})}),"\n",(0,a.jsx)(s.h2,{id:"sending-messages",children:"Sending Messages"}),"\n",(0,a.jsxs)(s.p,{children:["Use the agent's ",(0,a.jsx)(s.code,{children:"send"})," method:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from stella_sdk.messages import StatusMessage\n\nasync def on_connect(self):\n    # Using convenience method\n    await self.send_status("ready")\n\n    # Using message class directly\n    await self.send(StatusMessage(status="ready"))\n'})}),"\n",(0,a.jsx)(s.h2,{id:"receiving-messages",children:"Receiving Messages"}),"\n",(0,a.jsxs)(s.p,{children:["Override ",(0,a.jsx)(s.code,{children:"on_data_message"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'async def on_data_message(self, message: dict):\n    msg_type = message.get("type")\n\n    if msg_type == "user_text":\n        await self.handle_text_input(message["data"])\n\n    elif msg_type == "control":\n        await self.handle_control(message["data"])\n\n    elif msg_type == "config_update":\n        await self.handle_config(message["data"])\n'})}),"\n",(0,a.jsx)(s.h2,{id:"custom-message-types",children:"Custom Message Types"}),"\n",(0,a.jsx)(s.p,{children:"You can define custom messages:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'from stella_sdk.messages import BaseMessage\n\nclass CustomMessage(BaseMessage):\n    type = "custom_type"\n\n    def __init__(self, custom_data: str):\n        self.data = {"custom_data": custom_data}\n\n# Send custom message\nawait agent.send(CustomMessage("my data"))\n'})}),"\n",(0,a.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"/docs/agent-sdk/base-agent",children:"Base Agent"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"/docs/agent-sdk/progress-tracking",children:"Progress Tracking"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"/docs/agent-sdk/building-custom-agent",children:"Building Custom Agents"})}),"\n"]})]})}function g(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>l});var t=n(6540);const a={},i=t.createContext(a);function r(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);