"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[8674],{3998(e,n,s){s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"agent-sdk/base-agent","title":"\ud83e\uddf1 Base Agent","description":"The BaseAgent class is the foundation for all STELLA agents. It handles LiveKit connectivity, audio processing, and message passing.","source":"@site/docs/agent-sdk/base-agent.md","sourceDirName":"agent-sdk","slug":"/agent-sdk/base-agent","permalink":"/STELLA_backend/docs/agent-sdk/base-agent","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/agent-sdk/base-agent.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"\ud83e\uddf1 Base Agent"}}');var a=s(4848),i=s(8453);const o={sidebar_position:3,title:"\ud83e\uddf1 Base Agent"},l="\ud83e\uddf1 BaseAgent Class",r={},d=[{value:"Class Definition",id:"class-definition",level:2},{value:"Lifecycle Methods",id:"lifecycle-methods",level:2},{value:"on_connect",id:"on_connect",level:3},{value:"on_disconnect",id:"on_disconnect",level:3},{value:"on_participant_joined",id:"on_participant_joined",level:3},{value:"on_participant_left",id:"on_participant_left",level:3},{value:"Audio Methods",id:"audio-methods",level:2},{value:"on_transcript",id:"on_transcript",level:3},{value:"on_audio_frame",id:"on_audio_frame",level:3},{value:"publish_audio",id:"publish_audio",level:3},{value:"Data Channel Methods",id:"data-channel-methods",level:2},{value:"on_data_message",id:"on_data_message",level:3},{value:"send",id:"send",level:3},{value:"Utility Methods",id:"utility-methods",level:2},{value:"send_status",id:"send_status",level:3},{value:"send_transcript",id:"send_transcript",level:3},{value:"update_todo",id:"update_todo",level:3},{value:"Properties",id:"properties",level:2},{value:"room_name",id:"room_name",level:3},{value:"participant_identity",id:"participant_identity",level:3},{value:"participants",id:"participants",level:3},{value:"is_connected",id:"is_connected",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"-baseagent-class",children:"\ud83e\uddf1 BaseAgent Class"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"BaseAgent"})," class is the foundation for all STELLA agents. It handles LiveKit connectivity, audio processing, and message passing."]}),"\n",(0,a.jsx)(n.h2,{id:"class-definition",children:"Class Definition"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from stella_sdk import BaseAgent\n\nclass BaseAgent:\n    """Base class for all STELLA agents."""\n\n    def __init__(self, config: AgentConfig = None):\n        """Initialize the agent with optional configuration."""\n\n    async def run(self):\n        """Start the agent and connect to the room."""\n\n    async def stop(self):\n        """Stop the agent and disconnect from the room."""\n'})}),"\n",(0,a.jsx)(n.h2,{id:"lifecycle-methods",children:"Lifecycle Methods"}),"\n",(0,a.jsx)(n.p,{children:"Override these methods to customize agent behavior:"}),"\n",(0,a.jsx)(n.h3,{id:"on_connect",children:"on_connect"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_connect(self):\n    """Called when the agent successfully connects to the LiveKit room.\n\n    Use this to:\n    - Send initial greeting\n    - Set up state\n    - Start background tasks\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"on_disconnect",children:"on_disconnect"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_disconnect(self):\n    """Called when the agent disconnects from the room.\n\n    Use this to:\n    - Clean up resources\n    - Save state\n    - Log final metrics\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"on_participant_joined",children:"on_participant_joined"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_participant_joined(self, participant: Participant):\n    """Called when a new participant joins the room.\n\n    Args:\n        participant: The participant that joined\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"on_participant_left",children:"on_participant_left"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_participant_left(self, participant: Participant):\n    """Called when a participant leaves the room.\n\n    Args:\n        participant: The participant that left\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h2,{id:"audio-methods",children:"Audio Methods"}),"\n",(0,a.jsx)(n.h3,{id:"on_transcript",children:"on_transcript"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_transcript(self, text: str, is_final: bool):\n    """Called when speech is transcribed.\n\n    Args:\n        text: The transcribed text\n        is_final: Whether this is a final or interim transcript\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"on_audio_frame",children:"on_audio_frame"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_audio_frame(self, frame: AudioFrame):\n    """Called for each incoming audio frame.\n\n    Args:\n        frame: The audio frame data\n\n    Note: This is called frequently. For most use cases,\n    use on_transcript instead.\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"publish_audio",children:"publish_audio"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def publish_audio(self, audio: bytes | AudioStream):\n    """Publish audio to the room.\n\n    Args:\n        audio: Audio data as bytes or a streaming source\n    """\n'})}),"\n",(0,a.jsx)(n.h2,{id:"data-channel-methods",children:"Data Channel Methods"}),"\n",(0,a.jsx)(n.h3,{id:"on_data_message",children:"on_data_message"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def on_data_message(self, message: dict):\n    """Called when a data message is received.\n\n    Args:\n        message: The parsed JSON message\n\n    Common message types:\n    - user_text: Text input from user\n    - control: Control messages (pause, resume, etc.)\n    """\n    pass\n'})}),"\n",(0,a.jsx)(n.h3,{id:"send",children:"send"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def send(self, message: Message):\n    """Send a message through the data channel.\n\n    Args:\n        message: A Message object to send\n    """\n'})}),"\n",(0,a.jsx)(n.h2,{id:"utility-methods",children:"Utility Methods"}),"\n",(0,a.jsx)(n.h3,{id:"send_status",children:"send_status"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"async def send_status(self, status: str, message: str = None):\n    \"\"\"Send a status update.\n\n    Args:\n        status: Status string ('listening', 'thinking', 'speaking', etc.)\n        message: Optional status message\n    \"\"\"\n"})}),"\n",(0,a.jsx)(n.h3,{id:"send_transcript",children:"send_transcript"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def send_transcript(self, text: str, speaker: str = "assistant", is_final: bool = True):\n    """Send a transcript message.\n\n    Args:\n        text: The transcript text\n        speaker: Who is speaking (\'user\' or \'assistant\')\n        is_final: Whether this is a final transcript\n    """\n'})}),"\n",(0,a.jsx)(n.h3,{id:"update_todo",children:"update_todo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'async def update_todo(self, items: list[TodoItem]):\n    """Update the todo list.\n\n    Args:\n        items: List of TodoItem objects\n    """\n'})}),"\n",(0,a.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(n.h3,{id:"room_name",children:"room_name"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'@property\ndef room_name(self) -> str:\n    """The name of the LiveKit room."""\n'})}),"\n",(0,a.jsx)(n.h3,{id:"participant_identity",children:"participant_identity"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'@property\ndef participant_identity(self) -> str:\n    """The agent\'s identity in the room."""\n'})}),"\n",(0,a.jsx)(n.h3,{id:"participants",children:"participants"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'@property\ndef participants(self) -> list[Participant]:\n    """List of participants in the room."""\n'})}),"\n",(0,a.jsx)(n.h3,{id:"is_connected",children:"is_connected"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'@property\ndef is_connected(self) -> bool:\n    """Whether the agent is connected to a room."""\n'})}),"\n",(0,a.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"AgentConfig"})," class configures agent behavior:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from stella_sdk import AgentConfig\n\nconfig = AgentConfig(\n    # LiveKit settings\n    livekit_url="wss://your-livekit-server.com",\n    api_key="your-api-key",\n    api_secret="your-api-secret",\n\n    # Room settings\n    room_name="my-room",\n    participant_identity="my-agent",\n\n    # Audio settings\n    sample_rate=16000,\n    channels=1,\n\n    # Behavior settings\n    auto_subscribe=True,\n    publish_audio=True,\n    publish_data=True,\n)\n\nagent = MyAgent(config)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from stella_sdk import BaseAgent, AgentConfig, AudioPipeline\n\nclass ConversationalAgent(BaseAgent):\n    def __init__(self):\n        super().__init__()\n        self.pipeline = AudioPipeline()\n        self.history = []\n\n    async def on_connect(self):\n        await self.send_status("ready")\n        await self.greet()\n\n    async def on_disconnect(self):\n        print(f"Session ended. {len(self.history)} turns.")\n\n    async def on_participant_joined(self, participant):\n        print(f"Welcome {participant.identity}!")\n\n    async def on_transcript(self, text: str, is_final: bool):\n        if not is_final:\n            return\n\n        self.history.append({"role": "user", "content": text})\n\n        await self.send_status("thinking")\n        response = await self.generate_response()\n        await self.send_status("speaking")\n\n        await self.send_transcript(response, speaker="assistant")\n        audio = await self.pipeline.text_to_speech(response)\n        await self.publish_audio(audio)\n\n        self.history.append({"role": "assistant", "content": response})\n        await self.send_status("listening")\n\n    async def greet(self):\n        greeting = "Hello! How can I help you today?"\n        await self.send_transcript(greeting, speaker="assistant")\n        audio = await self.pipeline.text_to_speech(greeting)\n        await self.publish_audio(audio)\n\n    async def generate_response(self) -> str:\n        # Your LLM logic here\n        pass\n\n\nif __name__ == "__main__":\n    agent = ConversationalAgent()\n    agent.run()\n'})}),"\n",(0,a.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/agent-sdk/message-types",children:"Message Types"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/agent-sdk/audio-pipeline",children:"Audio Pipeline"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/agent-sdk/building-custom-agent",children:"Building Custom Agents"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var t=s(6540);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);