"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[1205],{1474(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"sdk/typescript-types","title":"TypeScript Types","description":"Complete TypeScript interfaces for the STELLA Session Management API.","source":"@site/docs/sdk/typescript-types.md","sourceDirName":"sdk","slug":"/sdk/typescript-types","permalink":"/STELLA_backend/docs/sdk/typescript-types","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/sdk/typescript-types.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"TypeScript Types"},"sidebar":"docsSidebar","previous":{"title":"Streaming","permalink":"/STELLA_backend/docs/sdk/streaming"},"next":{"title":"Kubernetes","permalink":"/STELLA_backend/docs/deployment/kubernetes"}}');var r=s(4848),i=s(8453);const o={sidebar_position:6,title:"TypeScript Types"},a="TypeScript Types",c={},l=[{value:"Installation",id:"installation",level:2},{value:"Enums",id:"enums",level:2},{value:"Entity Types",id:"entity-types",level:2},{value:"Project",id:"project",level:3},{value:"Session",id:"session",level:3},{value:"Room",id:"room",level:3},{value:"Agent Instance",id:"agent-instance",level:3},{value:"Participant",id:"participant",level:3},{value:"Message",id:"message",level:3},{value:"Room Event",id:"room-event",level:3},{value:"Timeline",id:"timeline",level:3},{value:"Request DTOs",id:"request-dtos",level:2},{value:"Project Requests",id:"project-requests",level:3},{value:"Session Requests",id:"session-requests",level:3},{value:"Agent Requests",id:"agent-requests",level:3},{value:"Response Types",id:"response-types",level:2},{value:"Paginated Response",id:"paginated-response",level:3},{value:"Join Token Response",id:"join-token-response",level:3},{value:"Delete Response",id:"delete-response",level:3},{value:"Error Response",id:"error-response",level:3},{value:"API Client Interface",id:"api-client-interface",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"React Hooks",id:"react-hooks",level:2},{value:"Validation Helpers",id:"validation-helpers",level:2},{value:"Type Guards",id:"type-guards",level:2},{value:"Constants",id:"constants",level:2},{value:"See Also",id:"see-also",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"typescript-types",children:"TypeScript Types"})}),"\n",(0,r.jsx)(n.p,{children:"Complete TypeScript interfaces for the STELLA Session Management API."}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.p,{children:"Copy these types directly into your project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/types/session-management.ts\n"})}),"\n",(0,r.jsx)(n.h2,{id:"enums",children:"Enums"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export enum SessionStatus {\n  ACTIVE = 'ACTIVE',\n  CLOSED = 'CLOSED'\n}\n\nexport enum AgentStatus {\n  STARTING = 'STARTING',\n  RUNNING = 'RUNNING',\n  STOPPING = 'STOPPING',\n  STOPPED = 'STOPPED',\n  FAILED = 'FAILED'\n}\n\nexport type MessageType = 'text' | 'transcript' | 'system';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"entity-types",children:"Entity Types"}),"\n",(0,r.jsx)(n.h3,{id:"project",children:"Project"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface Project {\n  id: string;\n  name: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ProjectWithCounts extends Project {\n  activeSessions: number;\n  activeAgents: number;\n  totalSessions: number;\n}\n\nexport interface ProjectWithSessions extends Project {\n  sessions: Session[];\n}\n\nexport interface ProjectStats {\n  totalSessions: number;\n  activeSessions: number;\n  totalAgents: number;\n  activeAgents: number;\n  totalMessages: number;\n  totalParticipants: number;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"session",children:"Session"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface Session {\n  id: string;\n  projectId: string;\n  status: SessionStatus;\n  createdAt: string;\n  closedAt: string | null;\n}\n\nexport interface SessionWithRoom extends Session {\n  room: Room;\n}\n\nexport interface SessionDetail extends SessionWithRoom {\n  agents: AgentInstance[];\n  participants: Participant[];\n  _count: {\n    messages: number;\n    events: number;\n  };\n}\n\nexport interface SessionListItem extends SessionWithRoom {\n  _count: {\n    agents: number;\n    participants: number;\n    messages: number;\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"room",children:"Room"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface Room {\n  id: string;\n  sessionId: string;\n  livekitRoomName: string;\n  serverUrl: string;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"agent-instance",children:"Agent Instance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface AgentInstance {\n  id: string;\n  sessionId: string;\n  role: string;\n  status: AgentStatus;\n  podName: string | null;\n  secretName: string | null;\n  configMapName: string | null;\n  planId: string | null;\n  createdAt: string;\n  stoppedAt: string | null;\n}\n\nexport interface AgentWithSession extends AgentInstance {\n  session: {\n    id: string;\n    room: {\n      livekitRoomName: string;\n      serverUrl: string;\n    };\n  };\n}\n\nexport interface AgentWithPodStatus extends AgentWithSession {\n  podStatus: {\n    phase: 'Pending' | 'Running' | 'Succeeded' | 'Failed' | 'Unknown';\n    conditions: any[];\n    containerStatuses: any[];\n  } | null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"participant",children:"Participant"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface Participant {\n  id: string;\n  sessionId: string;\n  identity: string;\n  joinedAt: string;\n  leftAt: string | null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"message",children:"Message"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface Message {\n  id: string;\n  sessionId: string;\n  participantId: string | null;\n  content: string;\n  messageType: MessageType;\n  timestamp: string;\n}\n\nexport interface MessageWithParticipant extends Message {\n  participant: Participant | null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"room-event",children:"Room Event"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface RoomEvent {\n  id: string;\n  sessionId: string;\n  eventType: string;\n  data: Record<string, any>;\n  timestamp: string;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timeline",children:"Timeline"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export type TimelineItem =\n  | { type: 'message'; data: MessageWithParticipant }\n  | { type: 'event'; data: RoomEvent };\n\nexport interface Timeline {\n  timeline: TimelineItem[];\n  total: number;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"request-dtos",children:"Request DTOs"}),"\n",(0,r.jsx)(n.h3,{id:"project-requests",children:"Project Requests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface CreateProjectDto {\n  name: string; // 1-255 characters\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"session-requests",children:"Session Requests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface CreateSessionDto {\n  planId?: string; // max 255 characters\n}\n\nexport interface QuerySessionsDto {\n  status?: SessionStatus;\n  search?: string;\n  skip?: number; // default: 0\n  take?: number; // default: 20, max: 100\n}\n\nexport interface CreateTokenDto {\n  identity: string; // max 255 characters\n  name?: string; // max 255 characters\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"agent-requests",children:"Agent Requests"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface CreateAgentDto {\n  role: string; // max 255 characters\n  planId?: string; // max 255 characters\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"response-types",children:"Response Types"}),"\n",(0,r.jsx)(n.h3,{id:"paginated-response",children:"Paginated Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface PaginatedResponse<T> {\n  data: T[];\n  total: number;\n  skip: number;\n  take: number;\n}\n\nexport type SessionsResponse = PaginatedResponse<SessionListItem>;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"join-token-response",children:"Join Token Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface JoinTokenResponse {\n  token: string;\n  serverUrl: string;\n  roomName: string;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"delete-response",children:"Delete Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface DeleteResponse {\n  message: string;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"error-response",children:"Error Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface ApiError {\n  statusCode: number;\n  timestamp: string;\n  path: string;\n  message: string | string[];\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"api-client-interface",children:"API Client Interface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface ApiClient {\n  // Projects\n  createProject(data: CreateProjectDto): Promise<Project>;\n  listProjects(): Promise<ProjectWithCounts[]>;\n  getProject(projectId: string): Promise<ProjectWithSessions>;\n  getProjectStats(projectId: string): Promise<ProjectStats>;\n  deleteProject(projectId: string): Promise<DeleteResponse>;\n\n  // Sessions\n  createSession(\n    projectId: string,\n    data: CreateSessionDto\n  ): Promise<SessionWithRoom>;\n  listSessions(\n    projectId: string,\n    query: QuerySessionsDto\n  ): Promise<SessionsResponse>;\n  getSession(sessionId: string): Promise<SessionDetail>;\n  createJoinToken(\n    sessionId: string,\n    data: CreateTokenDto\n  ): Promise<JoinTokenResponse>;\n  getTimeline(\n    sessionId: string,\n    skip?: number,\n    take?: number\n  ): Promise<Timeline>;\n  closeSession(sessionId: string): Promise<DeleteResponse>;\n\n  // Agents\n  createAgent(\n    sessionId: string,\n    data: CreateAgentDto\n  ): Promise<AgentInstance>;\n  getAgent(agentId: string): Promise<AgentWithPodStatus>;\n  getAgentLogs(agentId: string): Promise<string>;\n  stopAgent(agentId: string): Promise<DeleteResponse>;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  ApiClient,\n  CreateProjectDto,\n  SessionDetail,\n} from './types/session-management';\n\nclass SessionManagementClient implements ApiClient {\n  constructor(private baseUrl: string) {}\n\n  async createProject(data: CreateProjectDto) {\n    const response = await fetch(`${this.baseUrl}/projects`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    });\n    return response.json();\n  }\n\n  // ... implement other methods\n}\n\n// Use with type safety\nconst client = new SessionManagementClient('http://localhost:3000');\n\nconst project = await client.createProject({ name: 'My Project' });\n// project is typed as Project\n\nconst session = await client.createSession(project.id, {\n  planId: 'cognitive_stimulation_demo_sm',\n});\n// session is typed as SessionWithRoom\n"})}),"\n",(0,r.jsx)(n.h2,{id:"react-hooks",children:"React Hooks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useState, useEffect } from 'react';\nimport {\n  Project,\n  SessionDetail,\n  AgentWithPodStatus,\n} from './types/session-management';\n\n// useProject hook\nexport function useProject(projectId: string) {\n  const [project, setProject] = useState<Project | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    async function fetchProject() {\n      try {\n        const response = await fetch(`/api/projects/${projectId}`);\n        const data: Project = await response.json();\n        setProject(data);\n      } catch (err) {\n        setError(err as Error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchProject();\n  }, [projectId]);\n\n  return { project, loading, error };\n}\n\n// useSession hook\nexport function useSession(sessionId: string) {\n  const [session, setSession] = useState<SessionDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchSession() {\n      const response = await fetch(`/api/sessions/${sessionId}`);\n      const data: SessionDetail = await response.json();\n      setSession(data);\n      setLoading(false);\n    }\n    fetchSession();\n  }, [sessionId]);\n\n  return { session, loading };\n}\n\n// useAgent hook with polling\nexport function useAgent(agentId: string, pollInterval = 2000) {\n  const [agent, setAgent] = useState<AgentWithPodStatus | null>(null);\n\n  useEffect(() => {\n    async function fetchAgent() {\n      const response = await fetch(`/api/agents/${agentId}`);\n      const data: AgentWithPodStatus = await response.json();\n      setAgent(data);\n    }\n\n    fetchAgent();\n    const interval = setInterval(fetchAgent, pollInterval);\n\n    return () => clearInterval(interval);\n  }, [agentId, pollInterval]);\n\n  return { agent };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-helpers",children:"Validation Helpers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const validators = {\n  projectName: (name: string): boolean => {\n    return name.length >= 1 && name.length <= 255;\n  },\n\n  identity: (identity: string): boolean => {\n    return identity.length >= 1 && identity.length <= 255;\n  },\n\n  pagination: (skip: number, take: number): boolean => {\n    return skip >= 0 && take >= 1 && take <= 100;\n  },\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-guards",children:"Type Guards"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export function isApiError(error: any): error is ApiError {\n  return (\n    error &&\n    typeof error.statusCode === 'number' &&\n    typeof error.timestamp === 'string' &&\n    typeof error.path === 'string' &&\n    (typeof error.message === 'string' || Array.isArray(error.message))\n  );\n}\n\nexport function isSessionActive(session: Session): boolean {\n  return session.status === SessionStatus.ACTIVE;\n}\n\nexport function isAgentRunning(agent: AgentInstance): boolean {\n  return agent.status === AgentStatus.RUNNING;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"constants",children:"Constants"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const DEFAULT_PAGINATION = {\n  skip: 0,\n  take: 20,\n} as const;\n\nexport const MAX_PAGINATION = {\n  take: 100,\n} as const;\n\nexport const POLL_INTERVALS = {\n  SESSIONS: 5000, // 5 seconds\n  AGENTS: 2000,   // 2 seconds\n  TIMELINE: 3000, // 3 seconds\n} as const;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/sdk/overview",children:"SDK Overview"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/sdk/message-types",children:"Message Types"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/integration/frontend",children:"Frontend Integration"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);