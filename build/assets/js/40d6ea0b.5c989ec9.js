"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[7057],{2599(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"plan-structure/states","title":"States","description":"States represent distinct phases of a conversation. Each state contains tasks to complete and defines rules for transitioning to other states.","source":"@site/docs/plan-structure/states.md","sourceDirName":"plan-structure","slug":"/plan-structure/states","permalink":"/STELLA_backend/docs/plan-structure/states","draft":false,"unlisted":false,"editUrl":"https://github.com/c4dhi/STELLA_backend/tree/main/docs-site/docs/plan-structure/states.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"States"},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/STELLA_backend/docs/plan-structure/"},"next":{"title":"Tasks","permalink":"/STELLA_backend/docs/plan-structure/tasks"}}');var s=t(4848),r=t(8453);const d={sidebar_position:2,title:"States"},l="States",c={},o=[{value:"State Properties",id:"state-properties",level:2},{value:"Execution Modes",id:"execution-modes",level:2},{value:"STRICT Mode",id:"strict-mode",level:3},{value:"LOOSE Mode",id:"loose-mode",level:3},{value:"Comparison Table",id:"comparison-table",level:2},{value:"State Transitions",id:"state-transitions",level:2},{value:"Transition Properties",id:"transition-properties",level:3},{value:"Condition Types",id:"condition-types",level:3},{value:"<code>all_tasks_complete</code>",id:"all_tasks_complete",level:4},{value:"<code>deliverable_value</code>",id:"deliverable_value",level:4},{value:"<code>deliverable_exists</code>",id:"deliverable_exists",level:4},{value:"Transition Priority",id:"transition-priority",level:3},{value:"Complete State Example",id:"complete-state-example",level:2},{value:"State Flow Diagram",id:"state-flow-diagram",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"states",children:"States"})}),"\n",(0,s.jsx)(n.p,{children:"States represent distinct phases of a conversation. Each state contains tasks to complete and defines rules for transitioning to other states."}),"\n",(0,s.jsx)(n.h2,{id:"state-properties",children:"State Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Unique identifier for this state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"title"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Display name for the state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"type"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"loose"'})}),(0,s.jsxs)(n.td,{children:["Execution mode (",(0,s.jsx)(n.code,{children:"strict"})," or ",(0,s.jsx)(n.code,{children:"loose"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"description"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'""'})}),(0,s.jsx)(n.td,{children:"Purpose of this state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tasks"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"[]"})}),(0,s.jsx)(n.td,{children:"Tasks to complete in this state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"transitions"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"[]"})}),(0,s.jsx)(n.td,{children:"Rules for moving to other states"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"execution-modes",children:"Execution Modes"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"type"})," field determines how the agent processes tasks within the state."]}),"\n",(0,s.jsx)(n.h3,{id:"strict-mode",children:"STRICT Mode"}),"\n",(0,s.jsx)(n.p,{children:"Sequential task processing \u2014 one task at a time, in order."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "medical-intake",\n  "title": "Medical Intake",\n  "type": "strict",\n  "tasks": [\n    { "id": "symptoms", "description": "Collect symptoms" },\n    { "id": "duration", "description": "Collect duration" },\n    { "id": "medications", "description": "Collect medications" }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Tasks execute in array order (symptoms \u2192 duration \u2192 medications)"}),"\n",(0,s.jsx)(n.li,{children:"Agent completes one task before moving to the next"}),"\n",(0,s.jsx)(n.li,{children:"User cannot skip ahead"}),"\n",(0,s.jsx)(n.li,{children:"Ensures all prerequisite information is collected"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Medical or legal intake forms"}),"\n",(0,s.jsx)(n.li,{children:"Step-by-step wizards"}),"\n",(0,s.jsx)(n.li,{children:"Processes requiring specific order"}),"\n",(0,s.jsx)(n.li,{children:"Compliance-sensitive workflows"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"loose-mode",children:"LOOSE Mode"}),"\n",(0,s.jsx)(n.p,{children:"Flexible task processing \u2014 agent chooses naturally based on conversation flow."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "general-inquiry",\n  "title": "General Inquiry",\n  "type": "loose",\n  "tasks": [\n    { "id": "topic", "description": "Understand topic of interest" },\n    { "id": "preferences", "description": "Learn user preferences" },\n    { "id": "budget", "description": "Determine budget range" }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Agent can address tasks in any order"}),"\n",(0,s.jsx)(n.li,{children:"Natural conversation flow"}),"\n",(0,s.jsx)(n.li,{children:"User can provide information proactively"}),"\n",(0,s.jsx)(n.li,{children:"Agent adapts to user's responses"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Customer support conversations"}),"\n",(0,s.jsx)(n.li,{children:"Sales discovery calls"}),"\n",(0,s.jsx)(n.li,{children:"General information gathering"}),"\n",(0,s.jsx)(n.li,{children:"Exploratory conversations"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"comparison-table",children:"Comparison Table"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Aspect"}),(0,s.jsx)(n.th,{children:"STRICT"}),(0,s.jsx)(n.th,{children:"LOOSE"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Task Order"}),(0,s.jsx)(n.td,{children:"Sequential"}),(0,s.jsx)(n.td,{children:"Flexible"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"User Control"}),(0,s.jsx)(n.td,{children:"Limited"}),(0,s.jsx)(n.td,{children:"High"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Conversation Feel"}),(0,s.jsx)(n.td,{children:"Structured"}),(0,s.jsx)(n.td,{children:"Natural"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Skip Tasks"}),(0,s.jsx)(n.td,{children:"Not allowed"}),(0,s.jsx)(n.td,{children:"Agent decides"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Use Case"}),(0,s.jsx)(n.td,{children:"Forms, intake"}),(0,s.jsx)(n.td,{children:"Discovery, support"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"state-transitions",children:"State Transitions"}),"\n",(0,s.jsx)(n.p,{children:"Transitions define when and how to move from one state to another."}),"\n",(0,s.jsx)(n.h3,{id:"transition-properties",children:"Transition Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"target_state_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"State to transition to"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"condition_type"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"all_tasks_complete"'})}),(0,s.jsx)(n.td,{children:"Type of condition to evaluate"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"priority"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1"})}),(0,s.jsx)(n.td,{children:"Lower = higher priority"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"condition_config"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{}"})}),(0,s.jsx)(n.td,{children:"Additional condition parameters"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"condition-types",children:"Condition Types"}),"\n",(0,s.jsx)(n.h4,{id:"all_tasks_complete",children:(0,s.jsx)(n.code,{children:"all_tasks_complete"})}),"\n",(0,s.jsx)(n.p,{children:"Transitions when all required tasks in the current state are completed."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "transitions": [\n    {\n      "target_state_id": "review",\n      "condition_type": "all_tasks_complete",\n      "priority": 1\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"deliverable_value",children:(0,s.jsx)(n.code,{children:"deliverable_value"})}),"\n",(0,s.jsx)(n.p,{children:"Transitions when a specific deliverable has a specific value."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "transitions": [\n    {\n      "target_state_id": "premium-support",\n      "condition_type": "deliverable_value",\n      "priority": 1,\n      "condition_config": {\n        "deliverable_key": "membership_type",\n        "expected_value": "premium"\n      }\n    },\n    {\n      "target_state_id": "standard-support",\n      "condition_type": "deliverable_value",\n      "priority": 2,\n      "condition_config": {\n        "deliverable_key": "membership_type",\n        "expected_value": "standard"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"deliverable_exists",children:(0,s.jsx)(n.code,{children:"deliverable_exists"})}),"\n",(0,s.jsx)(n.p,{children:"Transitions when a deliverable has any value (not empty)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "transitions": [\n    {\n      "target_state_id": "has-referral",\n      "condition_type": "deliverable_exists",\n      "priority": 1,\n      "condition_config": {\n        "deliverable_key": "referral_code"\n      }\n    },\n    {\n      "target_state_id": "no-referral",\n      "condition_type": "all_tasks_complete",\n      "priority": 2\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"transition-priority",children:"Transition Priority"}),"\n",(0,s.jsxs)(n.p,{children:["When multiple transition conditions are satisfied, the transition with the lowest ",(0,s.jsx)(n.code,{children:"priority"})," value wins."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "transitions": [\n    {\n      "target_state_id": "emergency",\n      "condition_type": "deliverable_value",\n      "priority": 1,\n      "condition_config": {\n        "deliverable_key": "urgency",\n        "expected_value": "emergency"\n      }\n    },\n    {\n      "target_state_id": "standard-flow",\n      "condition_type": "all_tasks_complete",\n      "priority": 10\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"In this example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"urgency"})," equals ",(0,s.jsx)(n.code,{children:'"emergency"'}),", go to ",(0,s.jsx)(n.code,{children:"emergency"})," state (priority 1)"]}),"\n",(0,s.jsxs)(n.li,{children:["Otherwise, when all tasks complete, go to ",(0,s.jsx)(n.code,{children:"standard-flow"})," (priority 10)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"complete-state-example",children:"Complete State Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "customer-intake",\n  "title": "Customer Intake",\n  "type": "strict",\n  "description": "Collect essential customer information before routing",\n  "tasks": [\n    {\n      "id": "identify",\n      "description": "Identify Customer",\n      "instruction": "Ask for the customer\'s name and account number",\n      "required": true,\n      "deliverables": [\n        {\n          "key": "customer_name",\n          "type": "string",\n          "required": true\n        },\n        {\n          "key": "account_number",\n          "type": "string",\n          "required": true\n        }\n      ]\n    },\n    {\n      "id": "classify",\n      "description": "Classify Issue",\n      "instruction": "Determine the type of issue: billing, technical, or general",\n      "required": true,\n      "deliverables": [\n        {\n          "key": "issue_type",\n          "type": "enum",\n          "enum_values": ["billing", "technical", "general"],\n          "required": true\n        }\n      ]\n    }\n  ],\n  "transitions": [\n    {\n      "target_state_id": "billing-support",\n      "condition_type": "deliverable_value",\n      "priority": 1,\n      "condition_config": {\n        "deliverable_key": "issue_type",\n        "expected_value": "billing"\n      }\n    },\n    {\n      "target_state_id": "technical-support",\n      "condition_type": "deliverable_value",\n      "priority": 1,\n      "condition_config": {\n        "deliverable_key": "issue_type",\n        "expected_value": "technical"\n      }\n    },\n    {\n      "target_state_id": "general-support",\n      "condition_type": "all_tasks_complete",\n      "priority": 10\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"state-flow-diagram",children:"State Flow Diagram"}),"\n",(0,s.jsx)(n.p,{children:"A typical conversation flows through multiple states:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Greeting  \u2502  (loose) - Welcome user, collect name\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 all_tasks_complete\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Intake    \u2502  (strict) - Collect required information\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 deliverable_value (based on issue_type)\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Billing \u2502 Technical \u2502   General   \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502           \u2502            \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502 all_tasks_complete\n                 \u25bc\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502   Farewell  \u2502  (strict) - Close conversation\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/plan-structure/tasks",children:"Tasks"})," \u2014 Learn about task configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/plan-structure/deliverables",children:"Deliverables"})," \u2014 Configure data collection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/plan-structure/examples",children:"Examples"})," \u2014 See complete plan examples"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>d,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);